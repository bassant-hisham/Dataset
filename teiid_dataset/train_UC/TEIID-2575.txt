Hive's Binary Type Handling by Teiid
I have simple Hive table (column definition: "OBJECTVALUE BINARY" see [1]). When running a simple query "statement.executeQuery("select OBJECTVALUE from smalla;");" I am getting [2]. When I run it simply from Hive console it works ok.


[1]
https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Types

[2]
{noformat}
org.teiid.jdbc.TeiidSQLException: TEIID10076 Invalid conversion from type class org.teiid.core.types.BinaryType with value 'EFBFBDEFBFBDEFBFBD' to type class java.lang.String
	at org.teiid.jdbc.TeiidSQLException.create(TeiidSQLException.java:135)
	at org.teiid.jdbc.TeiidSQLException.create(TeiidSQLException.java:71)
	at org.teiid.jdbc.StatementImpl.postReceiveResults(StatementImpl.java:667)
	at org.teiid.jdbc.StatementImpl.access$100(StatementImpl.java:63)
	at org.teiid.jdbc.StatementImpl$2.onCompletion(StatementImpl.java:516)
	at org.teiid.client.util.ResultsFuture.done(ResultsFuture.java:130)
	at org.teiid.client.util.ResultsFuture.access$200(ResultsFuture.java:37)
	at org.teiid.client.util.ResultsFuture$1.receiveResults(ResultsFuture.java:75)
	at org.teiid.net.socket.SocketServerInstanceImpl.receivedMessage(SocketServerInstanceImpl.java:235)
	at org.teiid.net.socket.SocketServerInstanceImpl.read(SocketServerInstanceImpl.java:271)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.teiid.net.socket.SocketServerConnectionFactory$ShutdownHandler.invoke(SocketServerConnectionFactory.java:102)
	at $Proxy6.read(Unknown Source)
	at org.teiid.net.socket.SocketServerInstanceImpl$RemoteInvocationHandler$1.get(SocketServerInstanceImpl.java:370)
	at org.teiid.jdbc.StatementImpl.executeSql(StatementImpl.java:525)
	at org.teiid.jdbc.StatementImpl.executeSql(StatementImpl.java:393)
	at org.teiid.jdbc.StatementImpl.executeQuery(StatementImpl.java:327)
	at org.jboss.qe.HiveTranslatorTest.simpleQueryTest(HiveTranslatorTest.java:58)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:84)
	at org.testng.internal.InvokeMethodRunnable.runOne(InvokeMethodRunnable.java:46)
	at org.testng.internal.InvokeMethodRunnable.run(InvokeMethodRunnable.java:37)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:722)
Caused by: org.teiid.core.types.TransformationException: TEIID10076 Invalid conversion from type class org.teiid.core.types.BinaryType with value 'EFBFBDEFBFBDEFBFBD' to type class java.lang.String
	at org.teiid.core.types.DataTypeManager.transformValue(DataTypeManager.java:891)
	at org.teiid.dqp.internal.process.DataTierTupleSource.correctTypes(DataTierTupleSource.java:186)
	at org.teiid.dqp.internal.process.DataTierTupleSource.nextTuple(DataTierTupleSource.java:326)
	at org.teiid.query.processor.relational.AccessNode.nextBatchDirect(AccessNode.java:306)
	at org.teiid.query.processor.relational.RelationalNode.nextBatch(RelationalNode.java:278)
	at org.teiid.query.processor.relational.RelationalPlan.nextBatch(RelationalPlan.java:149)
	at org.teiid.query.processor.QueryProcessor.nextBatchDirect(QueryProcessor.java:149)
	at org.teiid.query.processor.QueryProcessor.nextBatch(QueryProcessor.java:112)
	at org.teiid.query.processor.BatchCollector.collectTuples(BatchCollector.java:153)
	at org.teiid.dqp.internal.process.RequestWorkItem.processMore(RequestWorkItem.java:435)
	at org.teiid.dqp.internal.process.RequestWorkItem.process(RequestWorkItem.java:320)
	at org.teiid.dqp.internal.process.AbstractWorkItem.run(AbstractWorkItem.java:51)
	at org.teiid.dqp.internal.process.RequestWorkItem.run(RequestWorkItem.java:248)
	at org.teiid.dqp.internal.process.DQPWorkContext.runInContext(DQPWorkContext.java:269)
	at org.teiid.dqp.internal.process.ThreadReuseExecutor$RunnableWrapper.run(ThreadReuseExecutor.java:119)
	at org.teiid.dqp.internal.process.ThreadReuseExecutor$3.run(ThreadReuseExecutor.java:214)
{noformat}