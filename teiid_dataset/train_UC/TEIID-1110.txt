NPE Connecting to a Teiid DataSource (XA) as Anonymous User
Attempting to logon to a VDB datasource anonymously gets an NPE due to null credentials:

1 [TeiidComponentException]
2 [NullPointerException]
	at org.teiid.net.socket.SocketServerConnection.authenticate(SocketServerConnection.java:193)
	at org.teiid.net.socket.SocketServerConnection.<init>(SocketServerConnection.java:94)
	at org.teiid.net.socket.SocketServerConnectionFactory.getConnection(SocketServerConnectionFactory.java:261)
	at org.teiid.jdbc.SocketProfile.createConnection(SocketProfile.java:104)
	at org.teiid.jdbc.SocketProfile.connect(SocketProfile.java:88)
	... 40 more
Caused by: [TeiidComponentException]
1 [NullPointerException]
	at org.teiid.client.util.ExceptionUtil.convertException(ExceptionUtil.java:66)
	at org.teiid.net.socket.SocketServerInstanceImpl$RemoteInvocationHandler.invoke(SocketServerInstanceImpl.java:371)
	at $Proxy288.logon(Unknown Source)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.teiid.net.socket.SocketServerConnection$ServerConnectionInvocationHandler.invoke(SocketServerConnection.java:218)
	at $Proxy288.logon(Unknown Source)
	at org.teiid.net.socket.SocketServerConnection.authenticate(SocketServerConnection.java:179)
	... 44 more
Caused by: java.lang.NullPointerException
	at org.teiid.services.TeiidLoginContext.authenticateUser(TeiidLoginContext.java:65)
	at org.teiid.services.SessionServiceImpl.authenticate(SessionServiceImpl.java:210)
	at org.teiid.services.SessionServiceImpl.createSession(SessionServiceImpl.java:153)
	at org.teiid.transport.LogonImpl.logon(LogonImpl.java:73)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.teiid.transport.ServerWorkItem.run(ServerWorkItem.java:81)
	at org.teiid.dqp.internal.process.DQPWorkContext$2.call(DQPWorkContext.java:190)
	at org.teiid.dqp.internal.process.DQPWorkContext$2.call(DQPWorkContext.java:187)
	at org.teiid.dqp.internal.process.DQPWorkContext.runInContext(DQPWorkContext.java:176)
	at org.teiid.dqp.internal.process.DQPWorkContext.runInContext(DQPWorkContext.java:187)
	at org.teiid.transport.SocketClientInstance.processMessagePacket(SocketClientInstance.java:160)
	at org.teiid.transport.SocketClientInstance.receivedMessage(SocketClientInstance.java:149)
	at org.teiid.transport.SSLAwareChannelHandler.messageReceived(SSLAwareChannelHandler.java:210)
	at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:98)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:560)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:796)
	at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleUpstream(ChunkedWriteHandler.java:117)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:560)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:796)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:391)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:317)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:299)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:216)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:80)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:560)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:555)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:345)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:332)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:323)
	at org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:275)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:196)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	... 1 more


